{"componentChunkName":"component---src-templates-post-js","path":"/blog/pitchfork-proxies-jet/","result":{"data":{"mdx":{"slug":"pitchfork-proxies-jet/","frontmatter":{"title":"Pitchfork and Proxies and Jet, Oh My!","date":"2019-02-09","excerpt":"Last Monday, I launched p4ktldr. By Tuesday, I knew I'd been had."},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Pitchfork and Proxies and Jet, Oh My!\",\n  \"date\": \"2019-02-09\",\n  \"excerpt\": \"Last Monday, I launched p4ktldr. By Tuesday, I knew I'd been had.\",\n  \"publish\": true\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"section\", {\n    className: \"blog-section\"\n  }, mdx(\"p\", null, \"Last Monday, I launched \", mdx(XA, {\n    href: \"https://p4ktldr.com/\",\n    mdxType: \"XA\"\n  }, \"p4ktldr\"), \". By Tuesday, I knew I\\u2019d been had.\"), mdx(\"p\", null, \"The idea for p4ktldr was simple: I\\u2019d provide a simple and intuitive interface to search for album reviews on \", mdx(XA, {\n    href: \"https://pitchfork.com/\",\n    mdxType: \"XA\"\n  }, \"Pitchfork\"), \", sorted by rating. The idea had been in my head for more than a year and I had started the site some 3 or 4 times since, most recently about a month ago spurred on by a bout of sober productivity (hello Dry January!) I took the opportunity to play around with \", mdx(XA, {\n    href: \"https://reactjs.org/docs/hooks-intro.html\",\n    mdxType: \"XA\"\n  }, \"React Hooks\"), \" and a few weekends and weeknights later, I had a working prototype.\"), mdx(\"a\", null), mdx(XA, {\n    href: \"https://twitter.com/prestonrichey/status/1092621390702886917\",\n    mdxType: \"XA\"\n  }, \"I tweeted\"), \" a link to the site on Monday night, and Tuesday morning was retweeted by Rich Ziade and Paul Ford (the founders of \", mdx(XA, {\n    href: \"https://postlight.com/\",\n    mdxType: \"XA\"\n  }, \"Postlight\"), \", my employer) as well as the official Postlight \", mdx(XA, {\n    href: \"https://twitter.com/PostlightStudio\",\n    mdxType: \"XA\"\n  }, \"Twitter account\"), \". So, there were eyes on the site even if traffic wasn't outrageous.\", mdx(\"p\", null, \"Around lunchtime on Tuesday I checked the site and noticed something was off. The site was broken, but in a very specific and peculiar way: a search for any artist would return only one thing: a link to the seminal mid-aughts Australian garage rock band, \", mdx(XA, {\n    href: \"https://en.wikipedia.org/wiki/Jet_(Australian_band)\",\n    mdxType: \"XA\"\n  }, \"Jet\"), \".\"), mdx(\"p\", null, \"I immediately knew something was up. Not only did any search return Jet and Jet alone, but the results of search for albums by Jet were also altered: only one album was returned, 2006\\u2019s \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Shine On\"), \", with a perfect rating of 10.0. This is when I knew I had been had.\"), mdx(\"div\", {\n    className: \"blog-inset\"\n  }, mdx(ZoomImage, {\n    src: shineOn,\n    zoomSrc: shineOnZoom,\n    mdxType: \"ZoomImage\"\n  })), mdx(\"p\", null, \"I knew so because I knew Pitchfork had not given \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Shine On\"), \" a 10 rating, but rather, \", \"[in]\", \"famously, a 0. The review had become a bit of a meme, reminiscent of \", mdx(XA, {\n    href: \"https://www.youtube.com/watch?v=dQw4w9WgXcQ\",\n    mdxType: \"XA\"\n  }, \"link-trolling\"), \" popular around that time. Alongside the 0.0 review of \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Shine On\"), \", in place of any explanation, was (and still is) an embedded video of a chimpanzee urinating into its own mouth. \", mdx(XA, {\n    href: \"https://pitchfork.com/reviews/albums/9464-shine-on/\",\n    mdxType: \"XA\"\n  }, \"Really\"), \".\"), mdx(\"p\", null, \"After doing a bit more poking around, I found a final clue to what had happened. Embedded in the spoofed data returned by Pitchfork\\u2019s API was a field that looked like this:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"json\"\n  }, mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"className\": \"language-json\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-json\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token property\"\n  }), \"\\\"authors\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \":\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"[\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token property\"\n  }), \"\\\"id\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \":\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"deadbeef\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token property\"\n  }), \"\\\"name\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \":\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"With Love\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token property\"\n  }), \"\\\"title\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \":\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"The Dev Team\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token property\"\n  }), \"\\\"url\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \":\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"/reviews/albums/9464-shine-on/\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token property\"\n  }), \"\\\"slug\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \":\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"reviews/albums/9464-shine-on\\\"\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"]\")))), mdx(\"p\", null, \"I\\u2019m willing to bet you get the picture even if you can\\u2019t read \", mdx(XA, {\n    href: \"https://www.json.org/\",\n    mdxType: \"XA\"\n  }, \"JSON\"), \".\"), mdx(\"p\", null, \"So, I knew that someone on the Pitchfork dev team had found out about my site and decided to have some fun with me. It\\u2019s worth saying, I think, that I wasn\\u2019t upset by the trolling. After all, I was using a public but undocumented API provided by Pitchfork without their permission. They could have sent back an error response, at best, and a cease and desist, at worse. I appreciated that the team took the time to break my site in such a specific and laughable way.\"), mdx(\"p\", null, \"But I knew I couldn\\u2019t just accept defeat. I certainly don\\u2019t have the time, knowledge, or prowess to wage war with a Cond\\xE9 Nast-funded team of developers. Still, I knew I had to at least attempt to answer what I saw as a challenge.\"), mdx(\"p\", null, \"I\\u2019m reluctant to talk about my solution because currently (as of Saturday Feb. 9th), it\\u2019s working. But I figure the site\\u2019s survival hinges less on whether I write about it now and more on the goodwill of the dev team at Pitchfork (or their ability to turn a blind eye to the trivial amount of traffic p4ktldr drives their way). I have no intention to monetize p4ktldr and I don\\u2019t really stand to benefit from its success other than its existence as a tool I personally find useful.\"), mdx(\"div\", {\n    className: \"blog-inset\"\n  }, mdx(ZoomImage, {\n    src: jet,\n    zoomSrc: jet,\n    caption: \"These guys say, 'use a proxy.'\",\n    mdxType: \"ZoomImage\"\n  })), mdx(\"p\", null, \"So, my solution: use a proxy.\"), mdx(\"p\", null, \"The initial requests to Pitchfork\\u2019s servers were made from the site itself, so it was trivial to detect and give a spoofed response. This approach was the easiest to implement, but also the easiest to detect. With a proxy, I essentially introduce a middleman which makes requests on the behalf of the application. This approach obscures the referrer, making it harder to track, but is noticeably slower (a proxied request can take 2 - 5 times longer).\"), mdx(\"p\", null, \"There are other reasons it isn\\u2019t an ideal solution. For one, it has the potential to cost me money, since the proxy is an \", mdx(XA, {\n    href: \"https://aws.amazon.com/lambda/\",\n    mdxType: \"XA\"\n  }, \"AWS Lambda\"), \" function charged per usage. It also is also somewhat brittle because Pitchfork could easily track down the IP of the proxy and blacklist it, much like they originally did to p4ktldr.com itself. I could probably fight this by relocating the proxy, but it\\u2019d be an exhausting game of cat and mouse and I\\u2019d much rather spend my time doing other things.\"), mdx(\"p\", null, \"For those interested in how I make these proxied requests, you can check out the source \", mdx(XA, {\n    href: \"https://github.com/prichey/p4ktldr/tree/master/src/lambda\",\n    mdxType: \"XA\"\n  }, \"here\"), \" and \", mdx(XA, {\n    href: \"https://github.com/prichey/p4ktldr/blob/master/src/setupProxy.js\",\n    mdxType: \"XA\"\n  }, \"here\"), \". The site was already hosted on \", mdx(XA, {\n    href: \"https://www.netlify.com/\",\n    mdxType: \"XA\"\n  }, \"Netlify\"), \", so I used \", mdx(XA, {\n    href: \"https://www.netlify.com/docs/functions/\",\n    mdxType: \"XA\"\n  }, \"Functions\"), \", which turned out to be very intuitive to use. \", mdx(XA, {\n    href: \"https://github.com/netlify/netlify-lambda\",\n    mdxType: \"XA\"\n  }, \"This repo\"), \" was invaluable in getting everything wired up.\"), mdx(\"p\", null, \"So, the ball\\u2019s back in Pitchfork\\u2019s court. For all I know, p4ktldr may be broken again later this evening. Or, it could carry on quietly for years to come. I appreciate that the dev team had a sense of humor about this, and frankly I learned quite a bit thinking through how to proxy requests in React, a question I\\u2019d yet to face in my years as a developer.\"), mdx(\"p\", null, \"I still find p4ktldr useful so I\\u2019m going to fight for its continued existence, but if I run into further challenges it may be hosted somewhere a bit more obscure.\"), mdx(\"p\", null, \"As someone more Australian than myself once \", mdx(XA, {\n    href: \"https://www.youtube.com/watch?v=p9SDaQ1seSg\",\n    mdxType: \"XA\"\n  }, \"sang\"), \":\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"When the stars all look the same\"), mdx(\"br\", null), \"\\n\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Don\\u2019t feel the cold or wind or rain\"), mdx(\"br\", null), \"\\n\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Everything will be okay\"), mdx(\"br\", null), \"\\n\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"We will meet again one day\"), mdx(\"br\", null))), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"And I will shine on for everyone\"), mdx(\"br\", null), \"\\n\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Shine on for everyone\")))));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"slug":"/blog/pitchfork-proxies-jet/"}},"staticQueryHashes":[]}