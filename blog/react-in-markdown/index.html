<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.f3b087403fcd4302430d.css" id="gatsby-global-css">code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 2.32.13"/><style data-styled="eWXuFb  dZTLiU cxhdwc fkmnfK eJXFLa bSuiGc liQTCq elkVYF dgaDPU gJBSfR HWVJX jpKIWj dlELqc cORGxx daohJm fxovqS" data-styled-version="4.4.1">
/* sc-component-id: ZoomImage__StyledFigcaption-sc-1h80lva-0 */
.dgaDPU{text-align:right;font-size:0.8em;padding:0.25em 0;color:#999;}
/* sc-component-id: MarkdownRenderer__StyledMarkdownRenderer-sc-12nwqai-0 */
.jpKIWj{width:100%;} @media (min-width:550px){.jpKIWj{overflow:hidden;}}
/* sc-component-id: MarkdownRenderer__StyledTextAreaWrap-sc-12nwqai-1 */
.dlELqc{height:100%;} @media (min-width:550px){.dlELqc{width:50%;float:left;}}
/* sc-component-id: MarkdownRenderer__StyledTextArea-sc-12nwqai-2 */
.cORGxx{height:100%;width:100%;border-radius:4px;border:1px solid #d1d1d1;font-size:0.9em;padding:1em;min-height:100px;resize:none;} @media (min-width:550px){.cORGxx{min-height:300px;}}
/* sc-component-id: MarkdownRenderer__StyledMarkdownOutputWrap-sc-12nwqai-3 */
.daohJm{padding:1em;} @media (min-width:550px){.daohJm{width:50%;float:left;}}
/* sc-component-id: PreRainbowKnot__Div-sc-1e5rrqu-0 */
.gJBSfR{height:100%;background-image:url(/static/bg-dde2b42fc0b0c89a602762d46de36d7b.png);background-size:cover;background-position:center;}
/* sc-component-id: PreRainbowKnot__Button-sc-1e5rrqu-1 */
.HWVJX{position:relative;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);}
/* sc-component-id: Nav__StyledNav-sc-10pvdn5-0 */
.eJXFLa{margin-bottom:1em;} @media (min-width:520px){.eJXFLa{margin-bottom:2em;}}
/* sc-component-id: Nav__StyledList-sc-10pvdn5-1 */
.bSuiGc{padding:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;margin-top:0;} @media (min-width:520px){.bSuiGc{display:block;}}
/* sc-component-id: Nav__ListElement-sc-10pvdn5-2 */
.liQTCq{display:inline-block;padding:0.5em;text-align:center;font-size:1.8rem;} @media (min-width:300px){.liQTCq{font-size:2.2rem;padding-right:0;padding-left:0;}} @media (min-width:350px){.liQTCq{font-size:2.2rem;}} @media (min-width:520px){.liQTCq{padding:0;margin-right:2rem;font-size:2.4rem;}} .liQTCq:after{content:' ';display:none;white-space:pre;} @media (min-width:520px){.liQTCq:after{display:inline-block;}}
/* sc-component-id: Nav__NavItem-sc-10pvdn5-3 */
.elkVYF{color:black;border:none;} .elkVYF:hover{color:blue;} .elkVYF:before{content:'/';display:none;} @media (min-width:520px){.elkVYF:before{display:inline;}} .elkVYF.active{font-weight:bold;}
/* sc-component-id: sc-global-2049630349 */
html{line-height:1.15;-webkit-text-size-adjust:100%;} body{margin:0;} main{display:block;} h1{font-size:2em;margin:0.67em 0;} hr{box-sizing:content-box;height:0;overflow:visible;} pre{font-family:monospace,monospace;font-size:1em;} a{background-color:transparent;} abbr[title]{border-bottom:none;-webkit-text-decoration:underline;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;} b,strong{font-weight:bolder;} code,kbd,samp{font-family:monospace,monospace;font-size:1em;} small{font-size:80%;} sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;} sub{bottom:-0.25em;} sup{top:-0.5em;} img{border-style:none;} button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0;} button,input{overflow:visible;} button,select{text-transform:none;} button,[type="button"],[type="reset"],[type="submit"]{-webkit-appearance:button;} button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0;} button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText;} fieldset{padding:0.35em 0.75em 0.625em;} legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;} progress{vertical-align:baseline;} textarea{overflow:auto;} [type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0;} [type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto;} [type="search"]{-webkit-appearance:textfield;outline-offset:-2px;} [type="search"]::-webkit-search-decoration{-webkit-appearance:none;} ::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;} details{display:block;} summary{display:list-item;} template{display:none;} [hidden]{display:none;} html,body{height:100%;} html{box-sizing:border-box;font-size:62.5%;} body{font-size:16px;font-size:1.6rem;font-family:'Roboto Mono',monospace;word-break:break-word;} h1,h2,h3,h4,h5,h6{font-family:'Rubik',sans-serif;margin:0.5em 0;} *,*:before,*:after{box-sizing:inherit;} iframe{margin:0 auto;display:block;max-width:100%;width:100%;} iframe.youtube{height:20rem;} @media (min-width:550px){iframe.youtube{height:34rem;}} blockquote{margin-left:1em;margin-right:1em;} @media (min-width:520px){blockquote{margin-left:2em;margin-right:2em;}} figure{margin:0;} ul{padding:0;list-style:square;} a{-webkit-text-decoration:none;text-decoration:none;color:blue;border-bottom:2px solid transparent;} a:hover{color:#999;border-color:#999;} a.anchor{border:none;} p{line-height:1.5em;font-size:1.8rem;} twitterwidget{margin:0 auto;} .sidebar{margin-left:auto;margin-right:auto;} @media (min-width:520px){.sidebar{width:calc(50% + 1em);clear:both;float:right;padding-left:1em;}} .sidebar.left{float:left;padding-left:0;padding-right:1em;} .sidebar img{width:100%;} .blog-full,.blog-inset{margin-left:auto;margin-right:auto;width:100%;} .blog-full img,.blog-inset img{width:100%;} @media (min-width:520px){.blog-inset{margin-top:2em;margin-bottom:2em;width:80%;}} .blog-section{font-size:1.8rem;} .blog-section:not(:first-child){margin-top:2em;} .blog-section h1,.blog-section h2,.blog-section h3,.blog-section h4,.blog-section h5,.blog-section h6{margin-bottom:0.5em;} .blog-section h1 + p,.blog-section h2 + p,.blog-section h3 + p,.blog-section h4 + p,.blog-section h5 + p,.blog-section h6 + p{margin-top:0.5em;} .blog-section ul{margin-left:1.5em;} @media (min-width:520px){.blog-section ul{margin-left:2.5em;}} .blog-section li{margin:0.5em 0;line-height:1.5em;} .blog-section li p{margin:0;} :not(pre) > code[class*="language-"],pre[class*="language-"]{font-size:0.9em;} .gatsby-highlight-code-line{background-color:#feb;display:block;margin-right:-1em;margin-left:-1em;padding-right:1em;padding-left:0.75em;border-left:0.25em solid #f99;} @media (min-width:520px){.gatsby-resp-image-wrapper{margin-top:2em;margin-bottom:2em;width:80%;}}
/* sc-component-id: Layout__Main-p46nka-0 */
.eWXuFb{max-width:83rem;padding:1em 1em 2em;margin:0 auto;} @media (min-width:350px){.eWXuFb{padding:1em 1.5em 4em;}} @media (min-width:520px){.eWXuFb{padding:2rem 2em 6rem;}}
/* sc-component-id: Layout__StyledTitle-p46nka-2 */
.cxhdwc{margin:0.3em 0;} @media (min-width:350px){.cxhdwc{margin:0.5em 0 0.2em;}} @media (min-width:520px){.cxhdwc{margin:0.667em 0;}}
/* sc-component-id: Layout__TitleLink-p46nka-3 */
.fkmnfK{text-transform:lowercase;color:#000;-webkit-text-decoration:none;text-decoration:none;border:none;} .fkmnfK:hover{color:#0000ff;}
/* sc-component-id: post__StyledPostDate-sd6zd6-0 */
.fxovqS{color:#999;font-weight:400;display:block;margin-top:1em;margin-bottom:1em;text-align:right;}</style><title data-react-helmet="true">Ioannis Tsiakkas | React In Markdown (In React)</title><link data-react-helmet="true" rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link data-react-helmet="true" rel="shortcut icon" type="image/x-icon" href="/favicon.ico"/><link data-react-helmet="true" rel="manifest" href="/manifest.json"/><link data-react-helmet="true" rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"/><link data-react-helmet="true" href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,700|Rubik:700" rel="stylesheet"/><meta data-react-helmet="true" name="theme-color" content="#ffffff"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:url" content="https://prestonrichey.com"/><meta data-react-helmet="true" property="og:image" content="https://prestonrichey.com/social-meta.png"/><meta data-react-helmet="true" property="og:image:secure_url" content="https://prestonrichey.com/social-meta.png"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:image" content="https://prestonrichey.com/social-meta.png"/><meta data-react-helmet="true" name="twitter:creator" content="@prestonrichey"/><meta data-react-helmet="true" property="og:title" content="React In Markdown (In React)"/><meta data-react-helmet="true" name="twitter:title" content="React In Markdown (In React)"/><meta data-react-helmet="true" property="og:description" content="Why I&#x27;m so excited about custom components in Markdown with Gatsby.js."/><meta data-react-helmet="true" name="twitter:description" content="Why I&#x27;m so excited about custom components in Markdown with Gatsby.js."/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link as="script" rel="preload" href="/webpack-runtime-f494e936f949e325e958.js"/><link as="script" rel="preload" href="/framework-eb684e3e828ad13b3940.js"/><link as="script" rel="preload" href="/app-51712915004c1ee7906c.js"/><link as="script" rel="preload" href="/styles-e9d24b1846c7d6eb9685.js"/><link as="script" rel="preload" href="/b4c8b9bfe57989d347dcb0518f327ec77d315bf1-81e54c09b1119b78609f.js"/><link as="script" rel="preload" href="/component---src-templates-post-js-3a720babd166f93a18ee.js"/><link as="fetch" rel="preload" href="/page-data/blog/react-in-markdown/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><main class="Layout__Main-p46nka-0 eWXuFb"><header class="Layout__StyledHeader-p46nka-1 dZTLiU"><h1 class="Layout__StyledTitle-p46nka-2 cxhdwc"><a class="Layout__TitleLink-p46nka-3 fkmnfK" href="/">Ioannis Tsiakkas</a></h1><nav class="Nav__StyledNav-sc-10pvdn5-0 eJXFLa"><ul class="Nav__StyledList-sc-10pvdn5-1 bSuiGc"><li class="Nav__ListElement-sc-10pvdn5-2 liQTCq"><a class="Nav__NavItem-sc-10pvdn5-3 elkVYF" href="/about/">about me</a></li><li class="Nav__ListElement-sc-10pvdn5-2 liQTCq"><a class="Nav__NavItem-sc-10pvdn5-3 elkVYF" href="/projects/">projects</a></li><li class="Nav__ListElement-sc-10pvdn5-2 liQTCq"><a class="Nav__NavItem-sc-10pvdn5-3 elkVYF" href="/experience/">experience</a></li><li class="Nav__ListElement-sc-10pvdn5-2 liQTCq"><a class="Nav__NavItem-sc-10pvdn5-3 elkVYF" href="/education/">education</a></li></ul></nav></header><h1>React In Markdown (In React)</h1><section class="blog-section"><p><em>Update, March 2019</em>: This article is out of date. You can find my article on the new approach, using <code class="language-text">gatsby-mdx</code>, <a target="_blank" rel="noopener noreferrer" href="/blog/react-in-mdx">here</a>.</p><hr/><p>This website is made with <a href="https://www.gatsbyjs.org/" target="_blank">Gatsby.js</a>, a static site generator for React. You can look at its source <a href="https://github.com/prichey/prestonrichey.com" target="_blank">here</a>. Gatsby packages up React components, Markdown files, and other assets, creating bundles of code that load as fast as possible. The experience developing a Gatsby site is also the best I’ve ever had, including a hot-reloading development server and a zero-config setup. I’m smitten.</p><p>My <em>one</em> complaint with Gatsby was that I wanted to be able to embed React components inside of Markdown. Say you want to make a cool D3 visualization to add to your blog post. Or maybe you want to make an ad-hoc interactive survey form. React (fortunately, in my opinion) forces you to think about your code in components, so it seemed like a significant loss <em>not</em> to be able to use components within a blog post. Surely I wasn’t the only one who felt the same way, so I did a quick search on Gatsby’s Github page, and sure enough, someone had opened up an <a href="https://github.com/gatsbyjs/gatsby/issues/312" target="_blank">issue</a> in June 2016 asking:</p><blockquote><p>Is there an easy way to use React components in my Markdown source. Something like reactdown?</p></blockquote><p>I subscribed to get notifications on any further discussion of the topic and went about my way, waiting for someone smarter than myself (or at least more familiar with React internals and compiling <a href="https://github.com/syntax-tree/hast" target="_blank">HAST</a>) to come along and offer up a solution.</p></section><section class="blog-section"><h2 id="enter-custom-components" style="position:relative"><a href="#enter-custom-components" aria-label="enter custom components permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Enter Custom Components</h2><p>A few more months of waiting, et voila! A week ago, a developer named Ryan Kennedy submitted a <a href="https://github.com/gatsbyjs/gatsby/pull/3732" target="_blank">PR</a> showing how to embed components in Markdown, using a package called <a href="https://github.com/rhysd/rehype-react" target="_blank">rehype-react</a>.</p><p>I won’t rehash how to add custom components to your own Gatsby site, since there are comprehensive instructions <a href="https://using-remark.gatsbyjs.org/custom-components/" target="_blank">here</a>. I’d just like to show a few examples of why being able to do so is so exciting, and how I figured out a few quirks of the approach along the way.</p></section><section class="blog-section"><h2 id="zoomimage" style="position:relative"><a href="#zoomimage" aria-label="zoomimage permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ZoomImage</h2><p>My initial use case for wanting to embed a react component was that I wanted to add a Medium-esqe image zoom effect for my blog. I had found a React package <a href="https://github.com/rpearce/react-medium-image-zoom" target="_blank">react-medium-image-zoom</a> that seemed like it would work great if only I could use React components. I figured out a hacky solution by conditionally including a <a href="https://github.com/fat/zoom.js/" target="_blank">different</a> (non-React) library for blog posts that had images, but this felt gross because the library didn’t get rolled up into the bundle served by Gatsby, and was thus unoptimized. After figuring out how to add custom components, I happily swapped that approach out for one using an actual React component.</p><p>Here’s what it looks like:</p><div class="blog-inset"><figure><img tabindex="0" src="/static/lake-02dc7c71ecb7ee41bfaa345303af6736.jpg" alt="Lake 22, WA" style="cursor:zoom-in"/><figcaption class="ZoomImage__StyledFigcaption-sc-1h80lva-0 dgaDPU">Lake 22, WA</figcaption></figure></div><p>Due to a quirk with the way components in Markdown are parsed, all of the props are passed with lowercase keys and string values. Because <code class="language-text">ImageZoom</code> expects props <code class="language-text">image</code> and <code class="language-text">zoomImage</code> to be objects, it was necessary to write a simple convenience wrapper to pass in the values as it expects them (code <a href="https://github.com/prichey/prestonrichey.com/blob/master/src/components/ZoomImage.js" target="_blank">here</a>).</p><p>Then, you simply include it in Markdown like so:</p><div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>zoom-image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#x27;</span>lake-22.jpg<span class="token punctuation">&#x27;</span></span> <span class="token attr-name">zoomSrc</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#x27;</span>lake-22-zoom.jpg<span class="token punctuation">&#x27;</span></span> <span class="token attr-name">caption</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#x27;</span>Lake 22, WA<span class="token punctuation">&#x27;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>zoom-image</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hidden</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- These don&#x27;t actually get rendered to the DOM --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#x27;</span>lake-22.jpg<span class="token punctuation">&#x27;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#x27;</span>lake-22-zoom.jpg<span class="token punctuation">&#x27;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hidden</span><span class="token punctuation">&gt;</span></span></code></pre></div><p>Adding the <code class="language-text">&lt;hidden /&gt;</code> component here is a hacky solution to a Webpack issue I haven’t quite figured out yet. Gatsby has a sophisticated <a href="https://www.gatsbyjs.org/docs/adding-images-fonts-files/" target="_blank">asset pipeline</a> which takes relative paths to assets and replaces them with cache-busting paths in the <code class="language-text">/public</code> directory (which is what ultimately gets deployed). This means you can maintain an organized asset structure, with each post’s folder containing relevant assets, while not worrying about the actual path of the asset.</p><p>For example:</p><div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#x27;</span>lake-22.jpg<span class="token punctuation">&#x27;</span></span> <span class="token punctuation">/&gt;</span></span></code></pre></div><p>gets replaced with something like</p><div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#x27;</span>/lake-22-9eef24d18518fa6f6576ccd96c3927a0.jpg<span class="token punctuation">&#x27;</span></span> <span class="token punctuation">/&gt;</span></span></code></pre></div><p>The issue is: without including the <code class="language-text">&lt;img /&gt;</code> tags, Webpack doesn’t replace the path passed to <code class="language-text">ZoomImage</code>, which ultimately ends 404ing, since there isn’t anything at <code class="language-text">/blog/react-in-markdown/lake-22.jpg</code>. Including them in the Markdown causes Webpack to replace the path for both that <code class="language-text">img</code> as well as the one created by the <code class="language-text">ZoomImage</code> component. Interestingly, <code class="language-text">&lt;hidden /&gt;</code> is a component which returns <code class="language-text">null</code> (you can look at its source <a href="https://github.com/prichey/prestonrichey.com/blob/master/src/components/Hidden.js" target="_blank">here</a>), and therefore doesn’t render its children, so the extra <code class="language-text">img</code> tags aren’t actually added to the DOM. Simply including them in the Markdown is enough to make Webpack to do its magic.</p><p>Another interesting issue is that the <code class="language-text">&lt;hidden /&gt;</code> component can appear directly before or after the <code class="language-text">ZoomImage</code> component, but if there’s a blank line of whitespace or more in between, the paths don’t get replaced. I’m going to keep on digging into this issue to try and figure out a way to get around this hacky fix, but for now it works fine and doesn’t ultimately affect page performance.</p></section><section class="blog-section"><h2 id="a-few-other-examples" style="position:relative"><a href="#a-few-other-examples" aria-label="a few other examples permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>A few other examples</h2><p>Custom components allow you to add all sorts of interactive elements to blog posts. What about a timer that shows the amount of time since this page was loaded?</p><div><h3>Seconds since component was mounted: <!-- -->0<!-- -->.</h3></div><p>No problem!</p><p>Or maybe a spinning rainbow torus knot?</p><div style="height:400px"><div class="PreRainbowKnot__Div-sc-1e5rrqu-0 gJBSfR"><button class="PreRainbowKnot__Button-sc-1e5rrqu-1 HWVJX">Click to load</button></div></div><p>Why not? (Shh.) The possibilities are endless!</p></section><section class="blog-section"><h2 id="a-level-deeper" style="position:relative"><a href="#a-level-deeper" aria-label="a level deeper permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>A level deeper</h2><p>I think it’s a common impulse for developers to push recursion as far as possible. How deep <em>does</em> the rabbit hole go? That being the case, my next question was obvious: would it be possible to write a React component that renders Markdown… inside of Markdown rendered by React?</p><p>I’ll cut to the chase: yes, yes it is.</p><div><div class="MarkdownRenderer__StyledMarkdownRenderer-sc-12nwqai-0 jpKIWj"><div class="MarkdownRenderer__StyledTextAreaWrap-sc-12nwqai-1 dlELqc"><textarea class="MarkdownRenderer__StyledTextArea-sc-12nwqai-2 cORGxx">### this textarea is editable

![](https://i.imgur.com/rv81Iei.gif)</textarea></div><div class="MarkdownRenderer__StyledMarkdownOutputWrap-sc-12nwqai-3 daohJm"><h3>this textarea is editable</h3><p><img src="https://i.imgur.com/rv81Iei.gif"/></p></div></div></div><p>Insert Xzibit meme here.</p></section><section class="blog-section"><h2 id="mdx" style="position:relative"><a href="#mdx" aria-label="mdx permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>.mdx?</h2><p>One of the exciting things about working with both React and Gatsby is how much momentum there is behind adding features and improving tooling and performance. There are many different approaches to use components in Markdown and I’m sure there will be lots of continued discussion and development of the topic. Just yesterday I came across a <a href="https://spectrum.chat/thread/1021be59-2738-4511-aceb-c66921050b9a" target="_blank">proposal</a> from Zeit’s Guillermo Rauch discussing a <code class="language-text">.mdx</code> file format which would marry Markdown and JSX for use cases such as this. There seems to be lots of community support around finding a solution to this common issue, so I’m excited to see what comes next.</p></section><section class="blog-section"><h2 id="update-a-year-later" style="position:relative"><a href="#update-a-year-later" aria-label="update a year later permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Update, a year later</h2><p>In case you didn’t notice the update up top: this approach using <code class="language-text">rehype-react</code> is out of date. <code class="language-text">MDX</code> has been released and has over 6,000 stars on GitHub! Furthermore, there’s a package called <a target="_blank" rel="noopener noreferrer" href="https://github.com/ChristopherBiscardi/gatsby-mdx">gatsby-mdx</a> which facilitates using <code class="language-text">MDX</code> with Gatsby. I recently updated this blog to use <code class="language-text">gatsby-mdx</code>; I wrote about that process <a target="_blank" rel="noopener noreferrer" href="/blog/react-in-mdx/">here</a>.</p></section><time class="post__StyledPostDate-sd6zd6-0 fxovqS">2018-02-10</time></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-70108869-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/react-in-markdown/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-2836f668b53c194d95e2.js"],"app":["/app-51712915004c1ee7906c.js"],"component---src-pages-404-js":["/component---src-pages-404-js-6e2ed661a9da000061a6.js"],"component---src-pages-about-2-mdx":["/component---src-pages-about-2-mdx-855c945d8fe33b0c2e14.js"],"component---src-pages-about-js":["/component---src-pages-about-js-26ceb8e6a2db85740bb5.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-f25047d2b0cd9928e43c.js"],"component---src-pages-education-mdx":["/component---src-pages-education-mdx-0972be65eb9010458285.js"],"component---src-pages-experience-mdx":["/component---src-pages-experience-mdx-92ed9f0e2a145b10a820.js"],"component---src-pages-index-js":["/component---src-pages-index-js-a3818d46c5ff259181a1.js"],"component---src-pages-projects-js":["/component---src-pages-projects-js-68124deec253111ab3a2.js"],"component---src-templates-post-js":["/component---src-templates-post-js-3a720babd166f93a18ee.js"],"component---src-templates-project-js":["/component---src-templates-project-js-bfce31c29584dc7f983d.js"]};/*]]>*/</script><script src="/polyfill-2836f668b53c194d95e2.js" nomodule=""></script><script src="/component---src-templates-post-js-3a720babd166f93a18ee.js" async=""></script><script src="/b4c8b9bfe57989d347dcb0518f327ec77d315bf1-81e54c09b1119b78609f.js" async=""></script><script src="/styles-e9d24b1846c7d6eb9685.js" async=""></script><script src="/app-51712915004c1ee7906c.js" async=""></script><script src="/framework-eb684e3e828ad13b3940.js" async=""></script><script src="/webpack-runtime-f494e936f949e325e958.js" async=""></script></body></html>